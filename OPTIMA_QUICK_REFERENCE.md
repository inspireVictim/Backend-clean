# üìã –ë–´–°–¢–†–ê–Ø –°–ü–†–ê–í–ö–ê: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Optima Bank

## üéØ –ö–†–ê–¢–ö–û–ï –†–ï–ó–Æ–ú–ï

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í –ö –ò–ù–¢–ï–ì–†–ê–¶–ò–ò**

Backend –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º QIWI OSMP v1.4.

---

## üîó ENDPOINT

```
GET http://5.59.232.211:8000/api/v1/optima/payment
```

**Production URL:** (–±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

---

## üìù –ë–´–°–¢–†–´–ï –ü–†–ò–ú–ï–†–´

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—á–µ—Ç–∞ (check)

```
GET /api/v1/optima/payment?command=check&txn_id=12345678901234567890&account=1&sum=100.00
```

**–û—Ç–≤–µ—Ç:**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <osmp_txn_id>12345678901234567890</osmp_txn_id>
    <sum>100.00</sum>
    <result>0</result>
    <comment>OK</comment>
</response>
```

---

### –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (pay)

```
GET /api/v1/optima/payment?command=pay&txn_id=12345678901234567890&txn_date=20241125120000&account=1&sum=100.00
```

**–û—Ç–≤–µ—Ç:**
```xml
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <osmp_txn_id>12345678901234567890</osmp_txn_id>
    <prv_txn>12345</prv_txn>
    <sum>100.00</sum>
    <result>0</result>
    <comment>OK</comment>
</response>
```

---

## üîê IP-–§–ò–õ–¨–¢–†–ê–¶–ò–Ø

**–†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ IP:** `79.142.16.0/20` (–º–∞—Å–∫–∞ 255.255.240.0)

–î–∏–∞–ø–∞–∑–æ–Ω: `79.142.16.0` ‚Äî `79.142.31.255`

---

## üìã –ü–ê–†–ê–ú–ï–¢–†–´

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π | –§–æ—Ä–º–∞—Ç | –ü—Ä–∏–º–µ—Ä |
|----------|--------------|--------|--------|
| `command` | ‚úÖ –î–∞ | `check` –∏–ª–∏ `pay` | `check` |
| `txn_id` | ‚úÖ –î–∞ | –î–æ 20 —Ü–∏—Ñ—Ä | `12345678901234567890` |
| `account` | ‚úÖ –î–∞ | 1-10 —Ü–∏—Ñ—Ä | `12345` |
| `sum` | ‚úÖ –î–∞ | –î—Ä–æ–±–Ω–æ–µ (10.45) | `100.00` |
| `txn_date` | ‚ùå –¢–æ–ª—å–∫–æ –¥–ª—è pay | –ì–ì–ì–ì–ú–ú–î–î–ß–ß–ú–ú–°–° | `20241125120000` |

---

## ‚úÖ –ö–û–î–´ –û–®–ò–ë–û–ö

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| 0 | OK |
| 4 | –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç account |
| 5 | Account –Ω–µ –Ω–∞–π–¥–µ–Ω |
| 7 | –ü—Ä–∏–µ–º –ø–ª–∞—Ç–µ–∂–µ–π –∑–∞–ø—Ä–µ—â–µ–Ω |
| 79 | –°—á–µ—Ç –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω |
| 241 | –°—É–º–º–∞ —Å–ª–∏—à–∫–æ–º –º–∞–ª–∞ (< 1.00) |
| 242 | –°—É–º–º–∞ —Å–ª–∏—à–∫–æ–º –≤–µ–ª–∏–∫–∞ (> 100,000.00) |
| 243 | –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—á–µ—Ç |
| 300 | –î—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞ |

---

## üîç –í–ê–õ–ò–î–ê–¶–ò–Ø ACCOUNT

**–§–æ—Ä–º–∞—Ç:** `^[0-9]{1,10}$`

**–ü—Ä–∏–º–µ—Ä—ã:**
- ‚úÖ `1` ‚Äî –≤–∞–ª–∏–¥–Ω–æ
- ‚úÖ `12345` ‚Äî –≤–∞–ª–∏–¥–Ω–æ
- ‚úÖ `1234567890` ‚Äî –≤–∞–ª–∏–¥–Ω–æ
- ‚ùå `abc123` ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω–æ (–∫–æ–¥ –æ—à–∏–±–∫–∏ 4)
- ‚ùå `12.5` ‚Äî –Ω–µ–≤–∞–ª–∏–¥–Ω–æ (–∫–æ–¥ –æ—à–∏–±–∫–∏ 4)

---

## üí∞ –õ–ò–ú–ò–¢–´ –ü–û –°–£–ú–ú–ï

- **–ú–∏–Ω–∏–º—É–º:** 1.00 —Ä—É–±–ª—å
- **–ú–∞–∫—Å–∏–º—É–º:** 100,000.00 —Ä—É–±–ª–µ–π

---

## ‚ö° –¢–ê–ô–ú–ê–£–¢–´

- **–ú–∞–∫—Å–∏–º—É–º:** 60 —Å–µ–∫—É–Ω–¥
- **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** 1-2 —Å–µ–∫ (check), 2-5 —Å–µ–∫ (pay)

---

## üîÑ –ò–î–ï–ú–ü–û–¢–ï–ù–¢–ù–û–°–¢–¨

‚úÖ –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ —Å —Ç–µ–º –∂–µ `txn_id` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

---

## üìö –ü–û–õ–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

–°–º. —Ñ–∞–π–ª—ã:
- `OPTIMA_BANK_INTEGRATION_DOCUMENTATION.md` ‚Äî –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `OPTIMA_COMPLIANCE_CHECKLIST.md` ‚Äî —á–µ–∫–ª–∏—Å—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2024-11-25

