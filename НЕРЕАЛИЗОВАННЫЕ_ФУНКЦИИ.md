# –ê–ù–ê–õ–ò–ó –ù–ï–†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–• –§–£–ù–ö–¶–ò–ô –í .NET BACKEND

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2024  
**–ü—Ä–æ–µ–∫—Ç:** YessBackend .NET  
**–°—Ç–∞—Ç—É—Å:** –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω

---

## –†–ï–ó–Æ–ú–ï

–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤, —Å—É—â–Ω–æ—Å—Ç–µ–π –ë–î –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤—ã—è–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –Ω–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–´–ï (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### 1. **–°–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ (Refunds)**

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå `RefundsController` - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞–º–∏
- ‚ùå `IRefundService` –∏ `RefundService` - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
- ‚ùå DTOs –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–æ–∑–≤—Ä–∞—Ç–∞–º–∏ (RefundRequestDto, RefundResponseDto)
- ‚ùå Endpoints –¥–ª—è:
  - `POST /api/v1/refunds` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç
  - `GET /api/v1/refunds` - —Å–ø–∏—Å–æ–∫ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `GET /api/v1/refunds/{id}` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ–∑–≤—Ä–∞—Ç–µ
  - `PUT /api/v1/admin/refunds/{id}/approve` - –æ–¥–æ–±—Ä–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ (–∞–¥–º–∏–Ω)
  - `PUT /api/v1/admin/refunds/{id}/reject` - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—Ç–∞ (–∞–¥–º–∏–Ω)
  - `GET /api/v1/admin/refunds` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ (–∞–¥–º–∏–Ω)

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ –°—É—â–Ω–æ—Å—Ç—å `Refund` –≤ –ë–î (`YessBackend.Domain/Entities/Refund.cs`)
- ‚úÖ –°–≤—è–∑—å `Transaction.Refunds` –≤ —Å—É—â–Ω–æ—Å—Ç–∏ Transaction
- ‚úÖ Enum `OrderStatus.Refunded` –≤ Order

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í Python backend –µ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `/api/v1/payments/refund`, –Ω–æ –≤ .NET –≤–µ—Ä—Å–∏–∏ —ç—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

---

### 2. **–°–∏—Å—Ç–µ–º–∞ –æ—Ç–∑—ã–≤–æ–≤ (Reviews)**

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå `ReviewsController` - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤
- ‚ùå –°—É—â–Ω–æ—Å—Ç—å `Review` –≤ –ë–î
- ‚ùå `IReviewService` –∏ `ReviewService`
- ‚ùå DTOs –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤
- ‚ùå Endpoints –¥–ª—è:
  - `POST /api/v1/orders/{order_id}/review` - –æ—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –Ω–∞ –∑–∞–∫–∞–∑
  - `GET /api/v1/partners/{partner_id}/reviews` - –æ—Ç–∑—ã–≤—ã –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ
  - `GET /api/v1/reviews/me` - –º–æ–∏ –æ—Ç–∑—ã–≤—ã
  - `PUT /api/v1/reviews/{id}` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
  - `DELETE /api/v1/reviews/{id}` - —É–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
  - `GET /api/v1/admin/reviews` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–∞–º–∏ (–∞–¥–º–∏–Ω)

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚ùå –í Python API –µ—Å—Ç—å `/api/v1/reviews` router, –Ω–æ –≤ .NET –µ–≥–æ –Ω–µ—Ç

---

### 3. **–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–≤–µ—Ä–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π Optima Bank**

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–µ—Å—Ç—Ä–∞ –ø–ª–∞—Ç–µ–∂–µ–π –∑–∞ –¥–µ–Ω—å
- ‚ùå –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–µ—Å—Ç—Ä–∞ –Ω–∞ email (reconciliation@yess-loyalty.com)
- ‚ùå –§–æ–Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å (Background Service) –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å–≤–µ—Ä–∫–∏
- ‚ùå Endpoint –¥–ª—è —Ä—É—á–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–µ—Å—Ç—Ä–∞: `POST /api/v1/admin/optima/reconciliation/generate`
- ‚ùå Endpoint –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–µ—Å—Ç—Ä–æ–≤: `GET /api/v1/admin/optima/reconciliation`
- ‚ùå Email —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–µ–µ—Å—Ç—Ä–æ–≤
- ‚ùå –§–æ—Ä–º–∞—Ç —Ä–µ–µ—Å—Ç—Ä–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (TAB-—Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `OPTIMA_INTEGRATION_PARAMETERS.md` –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–≤–µ—Ä–∫–µ
- ‚úÖ –ü—Ä–∏–µ–º –ø–ª–∞—Ç–µ–∂–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ `OptimaPaymentController`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
- –†–µ–µ—Å—Ç—Ä –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –¥–æ 10:00 –ú–°–ö
- –§–æ—Ä–º–∞—Ç: TAB-—Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ UTF-8
- –°–æ–¥–µ—Ä–∂–∏—Ç: txn_id, –¥–∞—Ç–∞, –≤—Ä–µ–º—è, account, —Å—É–º–º–∞
- –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞: "Total: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—É–º–º–∞"

---

## üü° –í–ê–ñ–ù–´–ï (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### 4. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏**

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå `PUT /api/v1/orders/{id}/cancel` - –æ—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- ‚ùå `PUT /api/v1/orders/{id}/status` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ (–ø–∞—Ä—Ç–Ω–µ—Ä/–∞–¥–º–∏–Ω)
- ‚ùå `GET /api/v1/partner/orders` - —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
- ‚ùå `PUT /api/v1/partner/orders/{id}/accept` - –ø—Ä–∏–Ω—è—Ç–∏–µ –∑–∞–∫–∞–∑–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º
- ‚ùå `PUT /api/v1/partner/orders/{id}/complete` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º
- ‚ùå `GET /api/v1/admin/orders` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤ (–∞–¥–º–∏–Ω) —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- ‚ùå Webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (`POST /api/v1/orders`)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (`GET /api/v1/orders/{id}`)
- ‚úÖ –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`GET /api/v1/orders`)
- ‚úÖ –†–∞—Å—á–µ—Ç –∑–∞–∫–∞–∑–∞ (`POST /api/v1/orders/calculate`)

---

### 5. **–°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π –∏ –Ω–∞–≥—Ä–∞–¥ (Levels & Rewards)**

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå `LevelsController` - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —É—Ä–æ–≤–Ω–µ–π
- ‚ùå Endpoints –¥–ª—è:
  - `GET /api/v1/users/me/level` - —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `GET /api/v1/users/me/rewards` - –¥–æ—Å—Ç—É–ø–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã
  - `POST /api/v1/users/me/rewards/{id}/claim` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥—ã
  - `GET /api/v1/admin/levels` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è–º–∏ (–∞–¥–º–∏–Ω)
  - `POST /api/v1/admin/levels` - —Å–æ–∑–¥–∞–Ω–∏–µ —É—Ä–æ–≤–Ω—è (–∞–¥–º–∏–Ω)
  - `GET /api/v1/admin/rewards` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥–∞–º–∏ (–∞–¥–º–∏–Ω)

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ –°—É—â–Ω–æ—Å—Ç–∏ –≤ –ë–î (`Achievement.cs`):
  - `UserLevel` - —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `LevelReward` - –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ —É—Ä–æ–≤–Ω–∏
  - `UserLevelReward` - –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã
  - `AchievementProgress` - –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°—É—â–Ω–æ—Å—Ç–∏ –µ—Å—Ç—å, –Ω–æ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ API endpoints –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.

---

### 6. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π**

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå `POST /api/v1/achievements/{id}/claim` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- ‚ùå `GET /api/v1/achievements/me` - –º–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- ‚ùå `GET /api/v1/achievements/{id}/progress` - –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—é
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö
- ‚ùå –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ `AchievementsController` —Å –±–∞–∑–æ–≤—ã–º–∏ endpoints
- ‚úÖ –°—É—â–Ω–æ—Å—Ç–∏ `Achievement`, `UserAchievement`, `AchievementProgress`

---

### 7. **–ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (CRUD)**

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå `UsersController` - –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- ‚ùå Endpoints –¥–ª—è:
  - `GET /api/v1/users/me` - –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
  - `PUT /api/v1/users/me` - –æ–±–Ω–æ–≤–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å
  - `PUT /api/v1/users/me/password` - –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
  - `POST /api/v1/users/me/avatar` - –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä
  - `GET /api/v1/admin/users` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∞–¥–º–∏–Ω)
  - `GET /api/v1/admin/users/{id}` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (–∞–¥–º–∏–Ω)
  - `PUT /api/v1/admin/users/{id}/block` - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–¥–º–∏–Ω)
  - `PUT /api/v1/admin/users/{id}/unblock` - —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–¥–º–∏–Ω)

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ `AuthController` —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ª–æ–≥–∏–Ω–æ–º
- ‚úÖ `GET /api/v1/auth/referral-stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- ‚úÖ –ë–∞–∑–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `AdminController`

---

### 8. **–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è)**

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤ –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- ‚ùå `POST /api/v1/users/me/referral-code/generate` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
- ‚ùå `GET /api/v1/users/me/referrals` - —Å–ø–∏—Å–æ–∫ –º–æ–∏—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- ‚ùå `GET /api/v1/users/me/referral-rewards` - –Ω–∞–≥—Ä–∞–¥—ã –æ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- ‚ùå –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ–Ω—É—Å–æ–≤ –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ –ü–æ–ª—è –≤ `User`: `ReferralCode`, `ReferredBy`
- ‚úÖ `GET /api/v1/auth/referral-stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ `GET /api/v1/admin/referrals` - —Å–ø–∏—Å–æ–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ (–∞–¥–º–∏–Ω)

---

## üü¢ –ñ–ï–õ–ê–¢–ï–õ–¨–ù–´–ï (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### 9. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå `GET /api/v1/analytics/revenue` - –≤—ã—Ä—É—á–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥
- ‚ùå `GET /api/v1/analytics/users/growth` - —Ä–æ—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚ùå `GET /api/v1/analytics/partners/top` - —Ç–æ–ø –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
- ‚ùå `GET /api/v1/analytics/export` - —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∞—à–±–æ—Ä–¥—ã

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ `AnalyticsController` —Å –±–∞–∑–æ–≤—ã–º–∏ endpoints

---

### 10. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Firebase/APNs –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- ‚ùå Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚ùå SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚ùå –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- ‚ùå –®–∞–±–ª–æ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

**–ß—Ç–æ –µ—Å—Ç—å:**
- ‚úÖ `NotificationsController`
- ‚úÖ –°—É—â–Ω–æ—Å—Ç—å `Notification`
- ‚úÖ –ü–æ–ª—è –≤ `User`: `PushEnabled`, `SmsEnabled`, `DeviceTokens`

---

### 11. **–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –∞—É–¥–∏—Ç**

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå –¢–∞–±–ª–∏—Ü–∞ `audit_logs` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚ùå `GET /api/v1/admin/audit-logs` - –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

### 12. **–≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö**

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå `GET /api/v1/admin/export/users` - —ç–∫—Å–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (CSV/Excel)
- ‚ùå `GET /api/v1/admin/export/transactions` - —ç–∫—Å–ø–æ—Ä—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚ùå `GET /api/v1/admin/export/orders` - —ç–∫—Å–ø–æ—Ä—Ç –∑–∞–∫–∞–∑–æ–≤
- ‚ùå `POST /api/v1/admin/import/users` - –∏–º–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

### 13. **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤**

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå –°—É—â–Ω–æ—Å—Ç—å `PromoCode` –≤ –ë–î
- ‚ùå `PromoCodesController`
- ‚ùå Endpoints –¥–ª—è:
  - `POST /api/v1/promo-codes/apply` - –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞
  - `GET /api/v1/admin/promo-codes` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏
  - `POST /api/v1/admin/promo-codes` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å—Ç—å `PromotionsController`, –Ω–æ —ç—Ç–æ –¥–ª—è –∞–∫—Ü–∏–π –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤, –∞ –Ω–µ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤.

---

### 14. **–î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (2FA)**

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå –ù–∞—Å—Ç—Ä–æ–π–∫–∞ 2FA —á–µ—Ä–µ–∑ SMS
- ‚ùå –ù–∞—Å—Ç—Ä–æ–π–∫–∞ 2FA —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- ‚ùå `POST /api/v1/auth/2fa/enable` - –≤–∫–ª—é—á–µ–Ω–∏–µ 2FA
- ‚ùå `POST /api/v1/auth/2fa/verify` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ 2FA

---

### 15. **–°–∏—Å—Ç–µ–º–∞ –∫—É–ø–æ–Ω–æ–≤**

**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

**–ß—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
- ‚ùå –°—É—â–Ω–æ—Å—Ç—å `Coupon` –≤ –ë–î
- ‚ùå –°–≤—è–∑—å –∫—É–ø–æ–Ω–æ–≤ —Å –∑–∞–∫–∞–∑–∞–º–∏
- ‚ùå Endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—É–ø–æ–Ω–∞–º–∏

---

## üìã –°–í–û–î–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê

| ‚Ññ | –§—É–Ω–∫—Ü–∏—è | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|---|---------|-----------|--------|------------|
| 1 | –°–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ | üî¥ –í—ã—Å–æ–∫–∏–π | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –ï—Å—Ç—å —Å—É—â–Ω–æ—Å—Ç—å –≤ –ë–î |
| 2 | –°–∏—Å—Ç–µ–º–∞ –æ—Ç–∑—ã–≤–æ–≤ | üî¥ –í—ã—Å–æ–∫–∏–π | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –ù–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏ –≤ –ë–î |
| 3 | –°–≤–µ—Ä–∫–∞ Optima | üî¥ –í—ã—Å–æ–∫–∏–π | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É |
| 4 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ | üü° –°—Ä–µ–¥–Ω–∏–π | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ù—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints |
| 5 | –£—Ä–æ–≤–Ω–∏ –∏ –Ω–∞–≥—Ä–∞–¥—ã | üü° –°—Ä–µ–¥–Ω–∏–π | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | –ï—Å—Ç—å —Å—É—â–Ω–æ—Å—Ç–∏ –≤ –ë–î |
| 6 | –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è | üü° –°—Ä–µ–¥–Ω–∏–π | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ë–∞–∑–æ–≤—ã–µ endpoints –µ—Å—Ç—å |
| 7 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ | üü° –°—Ä–µ–¥–Ω–∏–π | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ù—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä |
| 8 | –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ | üü° –°—Ä–µ–¥–Ω–∏–π | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ù—É–∂–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è |
| 9 | –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ | üü¢ –ù–∏–∑–∫–∏–π | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ë–∞–∑–æ–≤—ã–µ endpoints –µ—Å—Ç—å |
| 10 | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | üü¢ –ù–∏–∑–∫–∏–π | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ù—É–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ |
| 11 | –ê—É–¥–∏—Ç | üü¢ –ù–∏–∑–∫–∏–π | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | - |
| 12 | –≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç | üü¢ –ù–∏–∑–∫–∏–π | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | - |
| 13 | –ü—Ä–æ–º–æ–∫–æ–¥—ã | üü¢ –ù–∏–∑–∫–∏–π | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | - |
| 14 | 2FA | üü¢ –ù–∏–∑–∫–∏–π | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | - |
| 15 | –ö—É–ø–æ–Ω—ã | üü¢ –ù–∏–∑–∫–∏–π | ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | - |

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ü–†–ò–û–†–ò–¢–ï–¢–ê–ú

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ (–¥–ª—è production):
1. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤ (Refunds) - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
2. ‚úÖ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Å–≤–µ—Ä–∫–∞ Optima - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É —Å –±–∞–Ω–∫–æ–º
3. ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤

### –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è:
4. –°–∏—Å—Ç–µ–º–∞ –æ—Ç–∑—ã–≤–æ–≤ - —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Å–µ—Ä–≤–∏—Å–∞
5. –ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ - —É–¥–æ–±—Å—Ç–≤–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
6. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

### –í –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–µ:
7. –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π –∏ –Ω–∞–≥—Ä–∞–¥
8. Push/Email/SMS —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
9. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
10. –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

---

## üìù –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Optima Bank (–ø—Ä–∏–µ–º –ø–ª–∞—Ç–µ–∂–µ–π)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ö–æ—à–µ–ª–µ–∫ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω–µ—Ä–∞–º–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –î–æ–±–∞–≤–∏—Ç—å Background Services –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á (—Å–≤–µ—Ä–∫–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Unit –∏ Integration —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
3. –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã API
5. –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏ (Prometheus/Grafana)

---

**–ö–æ–Ω–µ—Ü –¥–æ–∫—É–º–µ–Ω—Ç–∞**

